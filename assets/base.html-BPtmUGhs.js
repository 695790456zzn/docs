import{_ as n,c as a,d as p,o as e}from"./app-ClEyjm_t.js";const t={};function o(l,s){return e(),a("div",null,s[0]||(s[0]=[p(`<h1 id="pm2" tabindex="-1"><a class="header-anchor" href="#pm2"><span>pm2</span></a></h1><h2 id="作用" tabindex="-1"><a class="header-anchor" href="#作用"><span>作用</span></a></h2><ul><li>进程守护，系统崩溃自动重启</li><li>启动多进程，充分利用CPU和内存</li></ul><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><blockquote><p>npm install pm2 -g</p></blockquote><h2 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用"><span>基本使用</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string-property property">&quot;prd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=production pm2 start app.js&quot;</span>    </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令"><span>常用命令</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 启动</span></span>
<span class="line">pm2 start</span>
<span class="line"><span class="token comment">// 查看进程</span></span>
<span class="line">pm2 list</span>
<span class="line"><span class="token comment">// 重启</span></span>
<span class="line">pm2 restart <span class="token operator">&lt;</span>AppName<span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span>id<span class="token operator">&gt;</span></span>
<span class="line"><span class="token comment">// 停止/删除进程</span></span>
<span class="line">pm2 stop <span class="token operator">&lt;</span>AppName<span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token punctuation">,</span> pm2 <span class="token keyword">delete</span> <span class="token operator">&lt;</span>AppName<span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span>id<span class="token operator">&gt;</span></span>
<span class="line"><span class="token comment">// 查看服务信息</span></span>
<span class="line">pm2 info <span class="token operator">&lt;</span>AppName<span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span>id<span class="token operator">&gt;</span></span>
<span class="line"><span class="token comment">// 查看打印日志</span></span>
<span class="line">pm2 log <span class="token operator">&lt;</span>AppName<span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span>id<span class="token operator">&gt;</span></span>
<span class="line"><span class="token comment">// 内存/日志信息等</span></span>
<span class="line">pm2 monit <span class="token operator">&lt;</span>AppName<span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span>id<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常用配置" tabindex="-1"><a class="header-anchor" href="#常用配置"><span>常用配置</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// pm2.conf.json 文件</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;apps&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pm2-test-server&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-property property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token string">&quot;app.js&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-property property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-property property">&quot;ignore_watch&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">            <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string">&quot;logs&quot;</span>        </span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-property property">&quot;instances&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">// 进程</span></span>
<span class="line">        <span class="token string-property property">&quot;error_file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;logs/err.log&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-property property">&quot;out_file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;logs/out.log&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string-property property">&quot;log_date_format&quot;</span><span class="token operator">:</span> <span class="token string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span>    </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// package.json 文件</span></span>
<span class="line"><span class="token string-property property">&quot;prd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cross-env NODE_ENV=production pm2 start pm2.conf.json&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11)]))}const i=n(t,[["render",o],["__file","base.html.vue"]]),c=JSON.parse('{"path":"/zh/node/pm2/base.html","title":"pm2","lang":"en-US","frontmatter":{},"git":{"updatedTime":1736852909000,"contributors":[{"name":"zhan_zhang","username":"","email":"18311292602@163.com","commits":1}],"changelog":[{"hash":"8cfd4d9f051ab632d03f7e2a8a72e3812caaff72","time":1736852909000,"email":"18311292602@163.com","author":"zhan_zhang","message":"完成node相关文档"}]},"filePathRelative":"zh/node/pm2/base.md"}');export{i as comp,c as data};

import{_ as s,c as a,d as p,o as t}from"./app-J1Rr-56F.js";const e="/docs/images/node/mongodb.png",o={};function l(c,n){return t(),a("div",null,n[0]||(n[0]=[p('<h1 id="mongodb" tabindex="-1"><a class="header-anchor" href="#mongodb"><span>Mongodb</span></a></h1><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><ul><li>Mongodb是一个文档数据库</li><li>Mongodb以文档形式存储数据，格式像 JSON</li></ul><p><img src="'+e+`" alt="Mongodb"></p><p>Mongodb和mysql的区别</p><ul><li>Mysql - 关系型，表格存储，SQL 操作，硬盘，适合存储格式规整的信息</li><li>Redis - 非关系型，key-value 存储，NoSQL， 内存</li><li>Mongodb - 非关系型，文档存储，NoSQL，硬盘，适合存储格式松散的信息</li></ul><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>Mac：</p><p>安装 homebrew</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 官方源</span></span>
<span class="line"><span class="token operator">/</span>bin<span class="token operator">/</span>bash <span class="token operator">-</span>c <span class="token string">&quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 国内源</span></span>
<span class="line"><span class="token operator">/</span>bin<span class="token operator">/</span>zsh <span class="token operator">-</span>c <span class="token string">&quot;$(curl -fsSL https://gitee.com/ineo6/homebrew-install/raw/master/install.sh)&quot;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 切换源</span></span>
<span class="line"><span class="token literal-property property">参考：https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>jianshu<span class="token punctuation">.</span>com<span class="token operator">/</span>p<span class="token operator">/</span>5ba6d96b2c37</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>用homebrew安装mongodb</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// 前置：需要安装xcode</span></span>
<span class="line">xcode<span class="token operator">-</span>select <span class="token operator">--</span>install</span>
<span class="line"><span class="token comment">// 安装社区版本（学习使用，正版收费）</span></span>
<span class="line">brew install mongodb<span class="token operator">-</span>community</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用"><span>基本使用</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token comment">// start</span></span>
<span class="line">brew services start mongodb<span class="token operator">-</span>community</span>
<span class="line"></span>
<span class="line"><span class="token comment">// stop</span></span>
<span class="line">brew services stop mongodb<span class="token operator">-</span>community</span>
<span class="line"></span>
<span class="line"><span class="token comment">// 命令行操作</span></span>
<span class="line"><span class="token operator">&gt;</span> mongosh</span>
<span class="line"><span class="token comment">// 切换操作的表</span></span>
<span class="line"><span class="token operator">&gt;</span> use myblog</span>
<span class="line"><span class="token comment">// 展示所有集合</span></span>
<span class="line"><span class="token operator">&gt;</span> show collections</span>
<span class="line"><span class="token comment">// 插入一条数据</span></span>
<span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>blogs<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;标题1&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;内容1&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 查找集合中的所有文档</span></span>
<span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>blogs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 按条件查找</span></span>
<span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>blogs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 更新一条数据</span></span>
<span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>blogs<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;标题A&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 删除一条数据</span></span>
<span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>blogs<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">// 排序 -- -1(倒叙)</span></span>
<span class="line"><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>blogs<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="概念" tabindex="-1"><a class="header-anchor" href="#概念"><span>概念</span></a></h2><ul><li><p>数据库：database</p></li><li><p>集合：collection</p></li><li><p>文档：document</p></li><li><p>bson：</p><p>JSON 是一种常用的数据格式，是字符串类型的</p><p>BSON = Binary JSON 即二进制类型的JSON</p></li></ul><p>-NoSQL：无需用 SQL 语句查询</p><h2 id="nodejs连接mongodb" tabindex="-1"><a class="header-anchor" href="#nodejs连接mongodb"><span>nodejs连接Mongodb</span></a></h2><p>安装插件</p><blockquote><p>npm i mongodb --save</p></blockquote><p>连接数据库</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code><span class="line"><span class="token keyword">const</span> <span class="token punctuation">{</span> MongoClient <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;mongodb&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&#39;mongodb://localhost:27017&#39;</span></span>
<span class="line"><span class="token keyword">const</span> dbName <span class="token operator">=</span> <span class="token string">&#39;myblog&#39;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MongoClient</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Connected successfully to server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// 连接数据库</span></span>
<span class="line">    <span class="token keyword">const</span> db <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">db</span><span class="token punctuation">(</span>dbName<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 连接到集合</span></span>
<span class="line">    <span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">&#39;myblog&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">    <span class="token comment">// 插入文档</span></span>
<span class="line">    <span class="token keyword">const</span> insertResult <span class="token operator">=</span> <span class="token keyword">await</span> collection<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Insert document:&#39;</span><span class="token punctuation">,</span> insertResult<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line">    <span class="token comment">// 查询文档</span></span>
<span class="line">    <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">const</span> docs <span class="token operator">=</span> <span class="token keyword">await</span> collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Found documents:&#39;</span><span class="token punctuation">,</span> docs<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;Found documents&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 确保在程序结束前关闭连接</span></span>
<span class="line">    <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>error<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22)]))}const u=s(o,[["render",l],["__file","base.html.vue"]]),r=JSON.parse('{"path":"/zh/node/mongodb/base.html","title":"Mongodb","lang":"en-US","frontmatter":{},"git":{"updatedTime":1736852909000,"contributors":[{"name":"zhan_zhang","username":"","email":"18311292602@163.com","commits":1}],"changelog":[{"hash":"8cfd4d9f051ab632d03f7e2a8a72e3812caaff72","time":1736852909000,"email":"18311292602@163.com","author":"zhan_zhang","message":"完成node相关文档"}]},"filePathRelative":"zh/node/mongodb/base.md"}');export{u as comp,r as data};
